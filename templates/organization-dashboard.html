{% extends "layout.html" %}

{% block title %}
    Organization Dashboard
{% endblock %}

{% block body %}
    <p>{{ name }}</p>
    <p>{{ description }}</p>
    <a href="{{ url_for('general.signout') }}">Sign out</a>
    <h1>Create a opportunity</h1>
    <form action="{{ url_for('events.create') }}" method="post">
        <input autocomplete="off" name="title" type="text" placeholder="Opportunity title" required/>
        <textarea autocomplete="off" name="description" placeholder="Opportunity description" required></textarea>
        <input pattern="[0-9.]+" type="text" placeholder="# of hours..." autocomplete="off" name="hours" required/>
        <input name="start" type="date" placeholder="Start date..." required/>
        <input pattern="[0-9]{1,3}" type="text" placeholder="1 - 100XP" autocomplete="off" name="xp" required/>
        <button type="submit">Create opportunity</button>
    </form>
    <h1>Opportunities we've created</h1>
    {% if events | length %}
        {% for event in events %}
            <h2>{{ event.title }}</h2>
            <p>{{ event.description[:50] }}...</p>
            <p><b>Hours</b>: {{ event.hours }}</p>
            <p><b>Start date</b>: {{ event.start_date }}</p>
            <p><b>XP</b>: {{ event.xp }}</p>
            <p><b>Open</b>: {{ "No" if event.ended else "Yes" }}</p>
            <p><b># of participants</b>: {{ event.participants | length }}</p>
            <a href="{{ url_for('events.opportunity', id=event.id) }}">View</a>
        {% endfor %}
    {% else %}
        <h2>No opportunities created...yet.</h2>
    {% endif %}
{% endblock %}
